(this.webpackJsonpkazi=this.webpackJsonpkazi||[]).push([[0],{51:function(e,t,a){e.exports=a(99)},56:function(e,t,a){},67:function(e,t,a){},74:function(e,t,a){},75:function(e,t,a){},77:function(e,t,a){},78:function(e,t,a){},96:function(e,t,a){},99:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(45),c=a.n(r),i=(a(56),a(3)),o=a(46),s=a.n(o),m=a(10),u=Object(n.createContext)(),d=function(e){var t=e.reducer,a=e.initalState,r=e.children;return l.a.createElement(u.Provider,{value:Object(n.useReducer)(t,a)},r)},E=function(){return Object(n.useContext)(u)},p=a(28),v=a.n(p),h=v.a.initializeApp({apiKey:"AIzaSyA0WFmOzyjAlts6uxRNlWW3dEjSBNnMJ3I",authDomain:"whine-d6334.firebaseapp.com",databaseURL:"https://whine-d6334.firebaseio.com",projectId:"whine-d6334",storageBucket:"whine-d6334.appspot.com",messagingSenderId:"836085222407",appId:"1:836085222407:web:65e0944ec9a9744bb12ea2"}).firestore(),g=v.a.auth(),f=v.a,b=(a(67),function(){var e,t=E(),a=Object(i.a)(t,1)[0];return l.a.createElement("div",null,l.a.createElement("nav",{className:"navbar"},l.a.createElement("div",{className:"nav-title"},l.a.createElement(m.b,{to:"/"},"Nyah-Giz")),l.a.createElement(m.b,{to:"/checkout"},l.a.createElement("div",{className:"header-basket"},l.a.createElement(s.a,null),l.a.createElement("span",{className:"header-basketCount"},(null===a||void 0===a?void 0:a.basket)?null===a||void 0===a?void 0:a.basket.length:0))),l.a.createElement("a",{href:"#",className:"toggle-btn",onClick:function(){var e=document.querySelector(".toggle-btn"),t=document.querySelector(".nav-links");e.addEventListener("click",(function(){t.classList.toggle("active")})),t.addEventListener("click",(function(){t.classList.remove("active")}))}},l.a.createElement("span",{className:"bar"}),l.a.createElement("span",{className:"bar"}),l.a.createElement("span",{className:"bar"})),l.a.createElement("div",{className:"nav-links"},l.a.createElement("ul",null,l.a.createElement("li",{onClick:function(){g.signOut()}},l.a.createElement(m.b,{to:!(null===a||void 0===a?void 0:a.user)&&"/login"},l.a.createElement("span",{className:"header-option1"},"Hello ",null===a||void 0===a||null===(e=a.user)||void 0===e?void 0:e.email),l.a.createElement("br",null),l.a.createElement("span",{className:"header-option2"},(null===a||void 0===a?void 0:a.user)?"Sign Out":"Sign In"))),l.a.createElement("li",null,l.a.createElement(m.b,{to:"/orders"},l.a.createElement("span",{className:"header-option1"},"Returns"),l.a.createElement("br",null),l.a.createElement("span",{className:"header-option2"},"& Orders"))),l.a.createElement("li",null,l.a.createElement(m.b,{to:""},l.a.createElement("span",{className:"header-option1"},"Your"),l.a.createElement("br",null),l.a.createElement("span",{className:"header-option2"},"Prime")))))))}),k=(a(74),function(e){var t=e.id,a=e.title,n=e.img,r=e.price,c=e.rating,o=E(),s=Object(i.a)(o,2),m=(s[0],s[1]);return l.a.createElement("div",{className:"product"},l.a.createElement("div",{className:"product-info"},l.a.createElement("p",null,a),l.a.createElement("p",{className:"product-price"},l.a.createElement("small",null,"Kshs."),l.a.createElement("strong",null,r))),l.a.createElement("div",{className:"product-rating"},Array(c).fill().map((function(e,t){return l.a.createElement("p",null,"\u2b50\ufe0f")}))),l.a.createElement("img",{src:n,alt:""}),l.a.createElement("button",{onClick:function(){m({type:"ADD_TO_BASKET",item:{id:t,title:a,img:n,price:r,rating:c}})}},"Add To Basket"))}),N=(a(75),function(){return l.a.createElement("div",{className:"home"},l.a.createElement("div",{className:"home-cont"},l.a.createElement("img",{className:"home-img",src:"logo21.jpg",alt:""}),l.a.createElement("div",{className:"home-row home-row1"},l.a.createElement(k,{id:1,title:"konyagi 750ml",img:"img/one.png",price:650,rating:5}),l.a.createElement(k,{id:2,title:"konyagi 250ml",img:"img/two.jpeg",price:220,rating:5})),l.a.createElement("div",{className:"home-row"},l.a.createElement(k,{id:3,title:"smirnoff 750ml",img:"img/three.jpeg",price:1500,rating:3}),l.a.createElement(k,{id:4,title:"konyagi 750ml",img:"img/one.png",price:650,rating:5}),l.a.createElement(k,{id:5,title:"konyagi 750ml",img:"img/one.png",price:650,rating:5})),l.a.createElement("div",{className:"home-row"},l.a.createElement(k,{id:6,title:"bombay 750ml",img:"img/four.jpeg",price:2400,rating:4}))))}),O=a(5),y=a(22),j=a.n(y),S=a(33),w=a(17),T={basket:[],user:null},x=function(e){return e?e.reduce((function(e,t){return t.price+e}),0):0},C=function(){var e=E(),t=Object(i.a)(e,1)[0],a=Object(O.f)();return l.a.createElement("div",{className:"subtotal"},l.a.createElement(j.a,{renderText:function(e){return l.a.createElement("p",null,"SubTotal  ",null===t||void 0===t?void 0:t.basket.length," items :",l.a.createElement("strong",null," ",e))},decimalScale:2,value:x(null===t||void 0===t?void 0:t.basket),displayType:"text",thousandSeparator:!0,prefix:"Kshs "}),l.a.createElement("button",{onClick:function(e){return a.push("/payment")}},"Proceed to Pay"))},A=(a(77),function(e){var t=e.id,a=e.img,n=e.title,r=e.price,c=e.rating,o=e.hideButton,s=E(),m=Object(i.a)(s,2),u=(m[0],m[1]);return l.a.createElement("div",{className:"checkout-product"},l.a.createElement("img",{src:a,alt:"",className:"checkout-product-img"}),l.a.createElement("div",{className:"checkout-product-info"},l.a.createElement("p",{className:"checkout-product-title"},n),l.a.createElement("p",{className:"checkout-product-price"},l.a.createElement("small",null,"Kshs "),l.a.createElement("strong",null,r)),l.a.createElement("p",{className:"checkout-product-rating"},Array(c).fill().map((function(e,t){return l.a.createElement("p",null,"\u2b50\ufe0f")}))),!o&&l.a.createElement("button",{onClick:function(){u({type:"REMOVE_FROM_BASKET",id:t})}},"Remove")))}),B=(a(78),function(){var e,t=E(),a=Object(i.a)(t,1)[0];return l.a.createElement("div",{className:"checkout"},l.a.createElement("div",{className:"checkout-left"},l.a.createElement("div",{className:"checkout-title"},l.a.createElement("h3",null,"Hello ",null===a||void 0===a||null===(e=a.user)||void 0===e?void 0:e.email),l.a.createElement("h1",null,"Shopping Basket")),null===a||void 0===a?void 0:a.basket.map((function(e){return l.a.createElement(A,{id:e.id,title:e.title,img:e.img,price:e.price,rating:e.rating})}))),l.a.createElement("div",{className:"checkout-right"},l.a.createElement(C,null)))}),_=function(){var e=Object(O.f)(),t=Object(n.useState)(""),a=Object(i.a)(t,2),r=a[0],c=a[1],o=Object(n.useState)(""),s=Object(i.a)(o,2),u=s[0],d=s[1];return l.a.createElement("div",{className:"login"},l.a.createElement(m.b,{to:"/"},l.a.createElement("img",{src:"logo3.png",alt:"",className:"login-logo"})),l.a.createElement("div",{className:"login-cont"},l.a.createElement("h1",null,"Sign In"),l.a.createElement("form",{className:"login-form"},l.a.createElement("h5",null,"E-mail"),l.a.createElement("input",{type:"email",value:r,onChange:function(e){c(e.target.value)}}),l.a.createElement("h5",null,"Password"),l.a.createElement("input",{type:"password",value:u,onChange:function(e){d(e.target.value)}}),l.a.createElement("button",{type:"submit",onClick:function(t){t.preventDefault(),g.signInWithEmailAndPassword(r,u).then((function(t){e.push("/")})).catch((function(e){return alert(e.message)}))},className:"login-signin"},"Sign-In")),l.a.createElement("p",null,"By signing in you agree to this websites terms and conditions"),l.a.createElement("br",null),l.a.createElement("p",null,"Don't have an account?"),l.a.createElement("button",{onClick:function(t){t.preventDefault(),g.createUserWithEmailAndPassword(r,u).then((function(t){console.log(t),t&&e.push("/")})).catch((function(e){console.log(e.message)}))},className:"login-register"},"Create Account")))},M=a(21),P=a.n(M),R=a(29),I=a(20),D=a(47),K=a.n(D).a.create({baseURL:"https://us-central1-whine-d6334.cloudfunctions.net/"}),z=(a(96),function(){var e,t=E(),a=Object(i.a)(t,2),r=a[0],c=a[1],o=Object(O.f)(),s=Object(n.useState)(),u=Object(i.a)(s,2),d=u[0],p=u[1],v=Object(n.useState)(),g=Object(i.a)(v,2),b=g[0],k=g[1],N=Object(n.useState)(),y=Object(i.a)(N,2),S=y[0],w=y[1],T=Object(n.useState)(),C=Object(i.a)(T,2),B=C[0],_=C[1],M=Object(n.useState)(),D=Object(i.a)(M,2),z=D[0],U=D[1],W=Object(I.useStripe)(),Y=Object(I.useElements)();Object(n.useEffect)((function(){(function(){var e=Object(R.a)(P.a.mark((function e(){var t;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K({method:"post",url:"/payments/create?total=".concat(x(null===r||void 0===r?void 0:r.basket))});case 2:t=e.sent,U(t.data.clientSecret);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[null===r||void 0===r?void 0:r.basket]);var L=function(){var e=Object(R.a)(P.a.mark((function e(t){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),w(!0),function(){var e=Object(R.a)(P.a.mark((function e(){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.get("/mpesa/stk?total=".concat(x(null===r||void 0===r?void 0:r.basket))).then((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),f.functions().httpsCallable("mpesa1")().then((function(e){console.log(e.data)})),e.next=8,W.confirmCardPayment(z,{payment_method:{card:Y.getElement(I.CardElement)}}).then((function(e){var t,a=e.paymentIntent;h.collection("users").doc(null===r||void 0===r||null===(t=r.user)||void 0===t?void 0:t.uid).collection("orders").doc(a.id).set({basket:r.basket,amount:a.amount,created:a.created}),_(!0),p(null),w(!1),c({type:"EMPTY_BASKET"}),o.replace("/orders")}));case 8:e.sent;case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return l.a.createElement("div",{className:"payment"},l.a.createElement("div",{className:"payment-cont"},l.a.createElement("h1",null,"Checkout (",l.a.createElement(m.b,{to:"/checkout"},null===r||void 0===r?void 0:r.basket.length," items"),") "),l.a.createElement("div",{className:"payment-section"},l.a.createElement("div",{className:"payment-title"},l.a.createElement("h3",null,"Delivery address")),l.a.createElement("div",{className:"payment-address"},l.a.createElement("p",null,null===r||void 0===r||null===(e=r.user)||void 0===e?void 0:e.email),l.a.createElement("p",null,"South B"),l.a.createElement("p",null,"Balozi"))),l.a.createElement("div",{className:"payment-section"},l.a.createElement("div",{className:"payment-title"},l.a.createElement("h3",null,"Review items in Basket")),l.a.createElement("div",{className:"payment-items"},null===r||void 0===r?void 0:r.basket.map((function(e){return l.a.createElement(A,{id:e.id,title:e.title,img:e.img,price:e.price,rating:e.rating})})))),l.a.createElement("div",{className:"payment-section"},l.a.createElement("div",{className:"payment-title"},l.a.createElement("h3",null,"Payment Method")),l.a.createElement("div",{className:"payment-details"},l.a.createElement("form",{onSubmit:L},l.a.createElement(I.CardElement,{onChange:function(e){k(e.empty),p(e.error?e.error.message:"")}}),l.a.createElement("div",{className:"payment-priceCont"},l.a.createElement(j.a,{renderText:function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement("h3",null,"Order Total: ",e))},decimalScale:2,value:x(null===r||void 0===r?void 0:r.basket),displayType:"text",thousandSeparator:!0,prefix:"Kshs "}),l.a.createElement("button",{disabled:S||b||B},l.a.createElement("span",null,S?l.a.createElement("p",null,"Processing"):"Buy Now"))),d&&l.a.createElement("div",null,d))))))}),U=a(48),W=a(49),Y=a.n(W),L=function(e){var t,a=e.order;return l.a.createElement("div",{className:"order"},l.a.createElement("h2",null,"Order"),l.a.createElement("p",null,Y.a.unix(a.data.created).format("MMMM Do YYYY h:mma")),l.a.createElement("p",{className:"order-id"},l.a.createElement("small",null,a.id)),null===(t=a.data.basket)||void 0===t?void 0:t.map((function(e){return l.a.createElement(A,{id:e.id,title:e.title,img:e.img,price:e.price,rating:e.rating,hideButton:!0})})),l.a.createElement(j.a,{renderText:function(e){return l.a.createElement("h3",null,"Order Total: ",e)},decimalScale:2,thousandSeparator:!0,displayType:"text",prefix:"Kshs ",value:a.data.amount}))},F=function(){var e=E(),t=Object(i.a)(e,1)[0],a=Object(n.useState)([]),r=Object(i.a)(a,2),c=r[0],o=r[1];return Object(n.useEffect)((function(){var e;(null===t||void 0===t?void 0:t.user)?h.collection("users").doc(null===t||void 0===t||null===(e=t.user)||void 0===e?void 0:e.uid).collection("orders").orderBy("created","desc").onSnapshot((function(e){o(e.docs.map((function(e){return{id:e.id,data:e.data()}})))})):o([])}),[null===t||void 0===t?void 0:t.user]),l.a.createElement("div",{className:"orders"},l.a.createElement("h1",null,"Your Orders"),l.a.createElement("div",{className:"orders-order"},null===c||void 0===c?void 0:c.map((function(e){return l.a.createElement(L,{order:e})}))))},J=Object(U.a)("pk_test_51HUnLGGfr6l7l1UbaI9Or5c0qmW9Ff6YlPW79sPdVqIzkfpfP1v28ElJ91GzXoSypVZhu1dbt14tbuNUFQH2SZ5000DRVzmMMJ");var V=function(){var e=E(),t=Object(i.a)(e,2),a=(t[0],t[1]);return Object(n.useEffect)((function(){g.onAuthStateChanged((function(e){a(e?{type:"SET_USER",user:e}:{type:"SET_USER",user:null})}))}),[]),l.a.createElement(m.a,null,l.a.createElement("div",{className:"App"},l.a.createElement(O.c,null,l.a.createElement(O.a,{exact:!0,path:"/"},l.a.createElement(b,null),l.a.createElement(N,null)),l.a.createElement(O.a,{path:"/checkout"},l.a.createElement(b,null),l.a.createElement(B,null)),l.a.createElement(O.a,{path:"/orders"},l.a.createElement(b,null),l.a.createElement(F,null)),l.a.createElement(O.a,{path:"/payment"},l.a.createElement(b,null),l.a.createElement(I.Elements,{stripe:J},l.a.createElement(z,null))),l.a.createElement(O.a,{path:"/login"},l.a.createElement(_,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(d,{initialState:T,reducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TO_BASKET":return Object(w.a)(Object(w.a)({},e),{},{basket:[].concat(Object(S.a)(e.basket),[t.item])});case"REMOVE_FROM_BASKET":var a=e.basket.findIndex((function(e){return e.id===t.id})),n=Object(S.a)(e.basket);return a>=0?n.splice(a,1):alert("error in  removing item"),Object(w.a)(Object(w.a)({},e),{},{basket:n});case"SET_USER":return Object(w.a)(Object(w.a)({},e),{},{user:t.user});case"EMPTY_BASKET":return Object(w.a)(Object(w.a)({},e),{},{basket:[]});default:return e}}},l.a.createElement(V,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[51,1,2]]]);
//# sourceMappingURL=main.2196b8f1.chunk.js.map